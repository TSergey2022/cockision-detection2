parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"j3xd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,n){this.x=t,this.y=n}return t.prototype.length=function(){return Math.sqrt(this.lengthSquared())},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.add_=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.add=function(t){return this.clone().add_(t)},t.prototype.sub_=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.sub=function(t){return this.clone().sub_(t)},t.prototype.mul1_=function(t){return this.x*=t,this.y*=t,this},t.prototype.mul2_=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mul1=function(t){return this.clone().mul1_(t)},t.prototype.mul2=function(t){return this.clone().mul2_(t)},t.prototype.clone=function(){return new t(this.x,this.y)},t.distance=function(n,e){return Math.sqrt(t.distanceSquared(n,e))},t.distanceSquared=function(t,n){var e=n.x-t.x,r=n.y-t.y;return e*e+r*r},t}();exports.default=t;
},{}],"CRZn":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("./vector2")),e=function(){function t(t,i,e,n){this.minX=t,this.maxX=i,this.minY=e,this.maxY=n}return t.prototype.size=function(){var t=this.maxX-this.minX,e=this.maxY-this.minY;return new i.default(t,e)},t.prototype.clone=function(){return new t(this.minX,this.maxX,this.minY,this.maxY)},t.prototype.intersectAABB=function(t){var i=this.minX<=t.maxX&&this.maxX>=t.minX,e=this.minY<=t.maxY&&this.maxY>=t.minY;return i&&e},t}();exports.default=e;
},{"./vector2":"j3xd"}],"uPw8":[function(require,module,exports) {
"use strict";function e(e,v,o){void 0===o&&(o=!1),e.beginPath(),e.arc(v.c.x,v.c.y,v.r,0,2*Math.PI),o?e.fill():e.stroke()}function v(e,v,o){void 0===o&&(o=!1),e.beginPath(),e.moveTo(v.v.v1.x,v.v.v1.y),e.lineTo(v.v.v2.x,v.v.v2.y),e.lineTo(v.v.v3.x,v.v.v3.y),e.closePath(),o?e.fill():e.stroke()}function o(e,v,o){void 0===o&&(o=!1),e.beginPath(),e.moveTo(v.v.t1.v.v1.x,v.v.t1.v.v1.y),e.lineTo(v.v.t2.v.v1.x,v.v.t2.v.v1.y),e.lineTo(v.v.t3.v.v1.x,v.v.t3.v.v1.y),e.lineTo(v.v.t4.v.v1.x,v.v.t4.v.v1.y),e.lineTo(v.v.t5.v.v1.x,v.v.t5.v.v1.y),e.lineTo(v.v.t6.v.v1.x,v.v.t6.v.v1.y),e.closePath(),o?e.fill():e.stroke()}function t(t,r,i){if(void 0===i&&(i=!1),"circle"===r.type)e(t,r,i);else if("tri"===r.type)v(t,r,i);else{if("hex"!==r.type)throw new Error("drawShape out of range");o(t,r,i)}}function r(e){return 1===e?"#A51D2D":2===e?"#E5A50A":3===e?"#26A269":"#000000"}function i(e,v){e.save(),e.fillStyle=r(v.l),t(e,v.s,!v.c),e.restore()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawCollider=exports.getColorByLife=exports.drawShape=exports.drawHexagon=exports.drawTriangle=exports.drawCircle=void 0,exports.drawCircle=e,exports.drawTriangle=v,exports.drawHexagon=o,exports.drawShape=t,exports.getColorByLife=r,exports.drawCollider=i;
},{}],"BAwG":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyGeneralElasticCollision=exports.moveCollider=exports.moveShape=exports.moveHexagon=exports.moveTriangle=exports.moveCircle=void 0;var t=e(require("../vector2"));function o(e,t){e.c.add_(t)}function r(e,t){e.v.v1.add_(t),e.v.v2.add_(t),e.v.v3.add_(t)}function v(e,t){r(e.v.t1,t),r(e.v.t2,t),r(e.v.t3,t),r(e.v.t4,t),r(e.v.t5,t),r(e.v.t6,t)}function n(e,t){"circle"===e.type?o(e,t):"tri"===e.type?r(e,t):"hex"===e.type&&v(e,t)}function s(e){n(e.s,e.v)}function l(e,o){var r=o.s.center().clone().sub_(e.s.center()),v=t.default.distance(e.s.center(),o.s.center()),n=new t.default(r.x/v,r.y/v),s=e.v.clone().sub_(o.v),l=s.x*n.x+s.y*n.y;l<0||(e.v.sub_(n.mul1(l)),o.v.add_(n.mul1(l)))}exports.moveCircle=o,exports.moveTriangle=r,exports.moveHexagon=v,exports.moveShape=n,exports.moveCollider=s,exports.applyGeneralElasticCollision=l;
},{"../vector2":"j3xd"}],"LqKZ":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=r(require(".")),n=r(require("../aabb")),o=function(r){function e(t,e){var n=r.call(this,"circle")||this;return n.c=t,n.r=e,n}return t(e,r),e.prototype.center=function(){return this.c.clone()},e.prototype.aabb=function(){var t=this.c.x-this.r,r=this.c.x+this.r,e=this.c.y-this.r,o=this.c.y+this.r;return new n.default(t,r,e,o)},e.prototype.clone=function(){return new e(this.c.clone(),this.r)},e}(e.default);exports.default=o;
},{".":"EPTP","../aabb":"CRZn"}],"ldNw":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("../vector2")),r=e(require(".")),o=e(require("../aabb")),i=function(){function t(t,e,n){this.v1=t,this.v2=e,this.v3=n}return t.prototype.clone=function(){return new t(this.v1.clone(),this.v2.clone(),this.v3.clone())},t}(),s=function(e){function r(t){var n=e.call(this,"tri")||this;return n.v=t,n}return t(r,e),r.prototype.center=function(){var t=(this.v.v1.x+this.v.v2.x+this.v.v3.x)/3,e=(this.v.v1.y+this.v.v2.y+this.v.v3.y)/3;return new n.default(t,e)},r.prototype.aabb=function(){var t=Math.min(this.v.v1.x,this.v.v2.x,this.v.v3.x),e=Math.min(this.v.v1.y,this.v.v2.y,this.v.v3.y),n=Math.max(this.v.v1.x,this.v.v2.x,this.v.v3.x),r=Math.max(this.v.v1.y,this.v.v2.y,this.v.v3.y);return new o.default(t,n,e,r)},r.prototype.clone=function(){return new r(this.v.clone())},r.fromVertex=function(t,e,n){return new r(new i(t,e,n))},r.fromCenterLengthAngle=function(t,e,o){var s=e*Math.sqrt(3)/3,v=o,u=v+2*Math.PI/3,h=v+4*Math.PI/3,a=new n.default(t.x+s*Math.cos(v),t.y+s*Math.sin(v)),c=new n.default(t.x+s*Math.cos(u),t.y+s*Math.sin(u)),f=new n.default(t.x+s*Math.cos(h),t.y+s*Math.sin(h));return new r(new i(a,c,f))},r}(r.default);exports.default=s;
},{"../vector2":"j3xd",".":"EPTP","../aabb":"CRZn"}],"yynT":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("../vector2")),r=e(require(".")),o=e(require("./triangle")),i=e(require("../aabb")),u=function(){function t(t,e,n,r,o,i){this.t1=t,this.t2=e,this.t3=n,this.t4=r,this.t5=o,this.t6=i}return t.prototype.clone=function(){return new t(this.t1.clone(),this.t2.clone(),this.t3.clone(),this.t4.clone(),this.t5.clone(),this.t6.clone())},t}(),a=function(e){function r(t){var n=e.call(this,"hex")||this;return n.v=t,n}return t(r,e),r.prototype.center=function(){return this.v.t1.v.v3.clone()},r.prototype.aabb=function(){for(var t=Number.MAX_VALUE,e=Number.MAX_VALUE,n=Number.MIN_VALUE,r=Number.MIN_VALUE,o=0,u=[this.v.t1,this.v.t2,this.v.t3,this.v.t4,this.v.t5,this.v.t6].map(function(t){return t.aabb()});o<u.length;o++){var a=u[o];t=Math.min(t,a.minX),e=Math.min(e,a.minY),n=Math.max(n,a.maxX),r=Math.max(r,a.maxY)}return new i.default(t,n,e,r)},r.prototype.clone=function(){return new r(this.v.clone())},r.fromCenterLengthAngle=function(t,e,i){var a=[];[0,Math.PI/3,2*Math.PI/3,Math.PI,4*Math.PI/3,5*Math.PI/3].forEach(function(r){var o=new n.default(t.x+e*Math.cos(r+i),t.y+e*Math.sin(r+i));a.push(o)});for(var c=[],h=0;h<a.length;h++){var s=o.default.fromVertex(a[h].clone(),a[(h+1)%a.length].clone(),t.clone());c.push(s)}return new r(new u(c[0],c[1],c[2],c[3],c[4],c[5]))},r}(r.default);exports.default=a;
},{"../vector2":"j3xd",".":"EPTP","./triangle":"ldNw","../aabb":"CRZn"}],"EPTP":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Hexagon=exports.Triangle=exports.Circle=exports.Shape=void 0;var r=function(){function e(e){this.type=e}return e.prototype.center=function(){throw new Error("Shape.center is abstract")},e.prototype.aabb=function(){throw new Error("Shape.aabb is abstract")},e.prototype.clone=function(){throw new Error("Shape.clone is abstract")},e}();exports.Shape=r,exports.default=r;var t=e(require("./circle"));exports.Circle=t.default;var o=e(require("./triangle"));exports.Triangle=o.default;var a=e(require("./hexagon"));exports.Hexagon=a.default;
},{"./circle":"LqKZ","./triangle":"ldNw","./hexagon":"yynT"}],"xwQm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,s,i){void 0===i&&(i=!1),this.s=t,this.v=e,this.l=s,this.c=i}return t.prototype.clone=function(){return new t(this.s.clone(),this.v.clone(),this.l,this.c)},t}();exports.default=t;
},{}],"UldJ":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeRandom=exports.makeCircleOfColliders=exports.getRandomNormalizedVector=exports.distToSegment=void 0;var t=e(require("./vector2")),r=require("./shape"),n=e(require("./collider"));function a(e,r,n){var a=t.default.distanceSquared(r,n);if(0==a)return t.default.distanceSquared(e,r);var o=((e.x-r.x)*(n.x-r.x)+(e.y-r.y)*(n.y-r.y))/a;return o=Math.max(0,Math.min(1,o)),t.default.distanceSquared(e,new t.default(r.x+o*(n.x-r.x),r.y+o*(n.y-r.y)))}function o(e,t,r){return Math.sqrt(a(e,t,r))}function u(){var e=2*Math.random()-1,r=2*Math.random()-1,n=Math.sqrt(e*e+r*r),a=e/n,o=r/n;return new t.default(a,o)}function d(){return 2*Math.random()*Math.PI-Math.PI}function i(e,a,o){for(var i=[],l=2*Math.PI/o,m=0;m<o;m++){var s=m*l,f=new t.default(e.x+a*Math.cos(s),e.y+a*Math.sin(s)),h=u().mul1_(4*Math.random());m%3==0?i.push(new n.default(new r.Circle(f,2.5),h,3)):m%3==1?i.push(new n.default(r.Triangle.fromCenterLengthAngle(f,5,d()),h,3)):m%3==2&&i.push(new n.default(r.Hexagon.fromCenterLengthAngle(f,2.5,d()),h,3))}return i}function l(e,a){for(var o=[],i=0;i<e;i++){var l=Math.random()*(a.maxX-a.minX)+a.minX,m=Math.random()*(a.maxY-a.minY)+a.minY,s=new t.default(l,m),f=u().mul1_(2*Math.random());i%3==0?o.push(new n.default(new r.Circle(s,2.5),f,3)):i%3==1?o.push(new n.default(r.Triangle.fromCenterLengthAngle(s,5,d()),f,3)):i%3==2&&o.push(new n.default(r.Hexagon.fromCenterLengthAngle(s,2.5,d()),f,3))}return o}exports.distToSegment=o,exports.getRandomNormalizedVector=u,exports.makeCircleOfColliders=i,exports.makeRandom=l;
},{"./vector2":"j3xd","./shape":"EPTP","./collider":"xwQm"}],"RvRF":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.detectEdgeCollisions=exports.detectCollisions=exports.intersectShapeShape=exports.intersectHexagonHexagon=exports.intersectHexagonTriangle=exports.intersectHexagonCircle=exports.intersectTriangleHexagon=exports.intersectTriangleTriangle=exports.intersectTriangleCircle=exports.intersectCircleHexagon=exports.intersectCircleTriangle=exports.intersectCircleCircle=exports.containsHexagon=exports.containsTriangle=exports.containsCircle=void 0;var e=t(require("../vector2")),r=require("../utils"),v={circle:{circle:a,tri:x,hex:c},tri:{circle:l,tri:u,hex:g},hex:{circle:p,tri:f,hex:y}};function n(t,e){return Math.pow(t.c.x-e.x,2)+Math.pow(t.c.y-e.y,2)<=Math.pow(t.r,2)}function i(t,e){var r=((t.v.v2.y-t.v.v3.y)*(e.x-t.v.v3.x)+(t.v.v3.x-t.v.v2.x)*(e.y-t.v.v3.y))/((t.v.v2.y-t.v.v3.y)*(t.v.v1.x-t.v.v3.x)+(t.v.v3.x-t.v.v2.x)*(t.v.v1.y-t.v.v3.y)),v=((t.v.v3.y-t.v.v1.y)*(e.x-t.v.v3.x)+(t.v.v1.x-t.v.v3.x)*(e.y-t.v.v3.y))/((t.v.v2.y-t.v.v3.y)*(t.v.v1.x-t.v.v3.x)+(t.v.v3.x-t.v.v2.x)*(t.v.v1.y-t.v.v3.y));return r>=0&&v>=0&&1-r-v>=0}function o(t,e){for(var r=0,v=[t.v.t1,t.v.t2,t.v.t3,t.v.t4,t.v.t5,t.v.t6];r<v.length;r++){if(i(v[r],e))return!0}return!1}function s(t,e,r,v){var n=(e.x-t.x)*(r.y-t.y)-(r.x-t.x)*(e.y-t.y),i=(e.x-t.x)*(v.y-t.y)-(v.x-t.x)*(e.y-t.y),o=(v.x-r.x)*(t.y-r.y)-(t.x-r.x)*(v.y-r.y),s=(v.x-r.x)*(e.y-r.y)-(e.x-r.x)*(v.y-r.y);return n*i<0&&o*s<0}function a(t,r){return e.default.distance(t.c,r.c)<=t.r+r.r}function x(t,e){return(0,r.distToSegment)(t.c,e.v.v1,e.v.v2)<=t.r||((0,r.distToSegment)(t.c,e.v.v2,e.v.v3)<=t.r||((0,r.distToSegment)(t.c,e.v.v3,e.v.v1)<=t.r||!!i(e,t.c)))}function c(t,e){for(var r=0,v=[e.v.t1,e.v.t2,e.v.t3,e.v.t4,e.v.t5,e.v.t6];r<v.length;r++){if(x(t,v[r]))return!0}return!1}function l(t,e){return x(e,t)}function u(t,e){for(var r=[{start:t.v.v1,end:t.v.v2},{start:t.v.v2,end:t.v.v3},{start:t.v.v3,end:t.v.v1}],v=[{start:e.v.v1,end:e.v.v2},{start:e.v.v2,end:e.v.v3},{start:e.v.v3,end:e.v.v1}],n=0,o=r;n<o.length;n++)for(var a=o[n],x=0,c=v;x<c.length;x++){var l=c[x];if(s(a.start,a.end,l.start,l.end))return!0}for(var u=0,g=[t.v.v1,t.v.v2,t.v.v3];u<g.length;u++){if(i(e,g[u]))return!0}for(var p=0,f=[e.v.v1,e.v.v2,e.v.v3];p<f.length;p++){if(i(t,f[p]))return!0}return!1}function g(t,e){for(var r=0,v=[e.v.t1,e.v.t2,e.v.t3,e.v.t4,e.v.t5,e.v.t6];r<v.length;r++){if(u(t,v[r]))return!0}return!1}function p(t,e){return c(e,t)}function f(t,e){return g(e,t)}function y(t,e){for(var r=0,v=[t.v.t1,t.v.t2,t.v.t3,t.v.t4,t.v.t5,t.v.t6];r<v.length;r++)for(var n=v[r],i=0,o=[e.v.t1,e.v.t2,e.v.t3,e.v.t4,e.v.t5,e.v.t6];i<o.length;i++){if(u(n,o[i]))return!0}return!1}function h(t,e){return v[t.type][e.type](t,e)}function d(t){for(var e=[],r=0;r<t.length;r++)for(var v=t[r],n=r+1;n<t.length;n++){var i=t[n];h(v.s,i.s)&&e.push([v,i])}for(r=1;r<=e.length;r++){var o=e[e.length-r];for(n=r+1;n<=e.length;n++){var s=e[e.length-n];if(o[0]===s[0]&&o[1]===s[1]){e.splice(e.length-r,1);break}if(o[0]===s[1]&&o[1]===s[0]){e.splice(e.length-r,1);break}}}return e}function C(t,e){for(var r={left:Array(),right:Array(),top:Array(),bottom:Array()},v=0,n=t;v<n.length;v++){var i=n[v];i.s.aabb().minX<e.minX?r.left.push(i):i.s.aabb().maxX>e.maxX&&r.right.push(i),i.s.aabb().minY<e.minY?r.top.push(i):i.s.aabb().maxY>e.maxY&&r.bottom.push(i)}return r}exports.containsCircle=n,exports.containsTriangle=i,exports.containsHexagon=o,exports.intersectCircleCircle=a,exports.intersectCircleTriangle=x,exports.intersectCircleHexagon=c,exports.intersectTriangleCircle=l,exports.intersectTriangleTriangle=u,exports.intersectTriangleHexagon=g,exports.intersectHexagonCircle=p,exports.intersectHexagonTriangle=f,exports.intersectHexagonHexagon=y,exports.intersectShapeShape=h,exports.detectCollisions=d,exports.detectEdgeCollisions=C;
},{"../vector2":"j3xd","../utils":"UldJ"}],"jRev":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("./aabb")),n=require("./proc/collision"),e=function(){function t(){this.topLeft=null,this.topRight=null,this.bottomLeft=null,this.bottomRight=null}return t.prototype.asArray=function(){return[this.topLeft,this.topRight,this.bottomLeft,this.bottomRight]},t.fromArray=function(i){var n=new t;return n.topLeft=i[0],n.topRight=i[1],n.bottomLeft=i[2],n.bottomRight=i[3],n},t}(),r=function(){function t(t,i){void 0===i&&(i=4),this.points=[],this.boundary=t,this.capacity=i,this.children=null}return t.prototype.getAllCollidingPairs=function(){var t=[];if(t.push.apply(t,(0,n.detectCollisions)(this.points)),null!==this.children)for(var i=0,e=this.children.asArray();i<e.length;i++){var r=e[i];t.push.apply(t,r.getAllCollidingPairs())}return t},t.prototype.insert=function(t){if(!this.boundary.intersectAABB(t.s.aabb()))return!1;if(this.length()<this.capacity)return this.points.push(t),!0;null===this.children&&this.subdivide();var i=!1;return this.children.topLeft.insert(t)&&(i=!0),this.children.topRight.insert(t)&&(i=!0),this.children.bottomLeft.insert(t)&&(i=!0),this.children.bottomRight.insert(t)&&(i=!0),i},t.prototype.length=function(){var t=this.points.length;if(null!==this.children)for(var i=0,n=this.children.asArray();i<n.length;i++){t+=n[i].length()}return t},t.prototype.queryRange=function(t){var i=[];if(!this.boundary.intersectAABB(t))return i;for(var n=0,e=this.points;n<e.length;n++){var r=e[n];t.intersectAABB(r.s.aabb())&&i.push(r)}return null===this.children?i:(i.push.apply(i,this.children.topLeft.queryRange(t)),i.push.apply(i,this.children.topRight.queryRange(t)),i.push.apply(i,this.children.bottomLeft.queryRange(t)),i.push.apply(i,this.children.bottomRight.queryRange(t)),i)},t.prototype.subdivide=function(){var n=this,r=this.boundary.clone().size().mul1_(.5),h=this.boundary;this.children=e.fromArray([new t(new i.default(h.minX,h.maxX-r.x,h.minY,h.maxY-r.y),2*this.capacity),new t(new i.default(h.minX+r.x,h.maxX,h.minY,h.maxY-r.y),2*this.capacity),new t(new i.default(h.minX,h.maxX-r.x,h.minY+r.y,h.maxY),2*this.capacity),new t(new i.default(h.minX+r.x,h.maxX,h.minY+r.y,h.maxY),2*this.capacity)]),this.children.asArray().forEach(function(t){n.points.forEach(function(i){return t.insert(i)})})},t.prototype.clear=function(){this.points=[],this.children=null},t}();exports.default=r;
},{"./aabb":"CRZn","./proc/collision":"RvRF"}],"dgAm":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("./vector2")),i=require("./proc/draw"),s=require("./proc/physics"),a=require("./proc/collision"),n=t(require("./aabb")),r=t(require("./quad_tree")),c=function(){function t(t,e){void 0===e&&(e=15),this.ctx=t,this.gameObjects=[],this.lastTick=performance.now(),this.lastDraw=this.lastTick,this.tickLength=e,this.tickCount=0,this.stopCycle=0,this.tree=new r.default(new n.default(0,t.canvas.clientWidth,0,t.canvas.clientHeight)),this.paused=!0}return t.prototype.insert=function(t){this.gameObjects.push(t)},t.prototype.continue=function(){this.paused&&(this.paused=!1,this.lastTick=performance.now(),this.run(this.lastTick))},t.prototype.pause=function(){this.paused||(this.paused=!0,window.cancelAnimationFrame(this.stopCycle))},t.prototype.draw=function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height),this.gameObjects.forEach(function(e){return(0,i.drawCollider)(t,e)})},t.prototype.run=function(t){var e=this;this.paused||(this.stopCycle=window.requestAnimationFrame(function(t){return e.run(t)}),this.step(t))},t.prototype.step=function(t){for(;t-this.tickLength>=this.lastTick;)this.lastTick=this.lastTick+this.tickLength,this.tickCount+=1,this.physicsStep();this.draw(this.ctx),this.lastDraw=t},t.prototype.physicsStep=function(){var t=this,i=new Set,r=this.tree;r.clear(),this.gameObjects.forEach(function(t){return r.insert(t)}),this.gameObjects.forEach(function(t){return t.c=!1});var c=r.getAllCollidingPairs();c.forEach(function(t){return s.applyGeneralElasticCollision.apply(void 0,t)}),c.forEach(function(t){return t.forEach(function(t){t.c=!0,t.l-=1,t.l<=0&&i.add(t)})}),i.forEach(function(e){var i=t.gameObjects.indexOf(e);t.gameObjects.splice(i,1)});for(var o=(0,a.detectEdgeCollisions)(this.gameObjects,new n.default(0,this.ctx.canvas.clientWidth,0,this.ctx.canvas.clientHeight)),h=0,u=o.left;h<u.length;h++){(b=u[h]).v.x=Math.abs(b.v.x),(0,s.moveShape)(b.s,new e.default(-b.s.aabb().minX,0))}for(var l=0,p=o.right;l<p.length;l++){(b=p[l]).v.x=-Math.abs(b.v.x),(0,s.moveShape)(b.s,new e.default(this.ctx.canvas.clientWidth-b.s.aabb().maxX,0))}for(var f=0,d=o.top;f<d.length;f++){(b=d[f]).v.y=Math.abs(b.v.y),(0,s.moveShape)(b.s,new e.default(0,-b.s.aabb().minY))}for(var v=0,m=o.bottom;v<m.length;v++){var b;(b=m[v]).v.y=-Math.abs(b.v.y),(0,s.moveShape)(b.s,new e.default(0,this.ctx.canvas.clientHeight-b.s.aabb().maxY))}this.gameObjects.forEach(s.moveCollider)},t}();exports.default=c;
},{"./vector2":"j3xd","./proc/draw":"uPw8","./proc/physics":"BAwG","./proc/collision":"RvRF","./aabb":"CRZn","./quad_tree":"jRev"}],"B6dB":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t,n=e(require("./aabb")),c=e(require("./game")),d=require("./utils"),i=document.getElementById("cnt"),r=document.getElementById("cnvs"),u=r.getContext("2d");function o(){t=new c.default(u,15),(0,d.makeRandom)(Number.parseInt(i.value),new n.default(0,r.clientWidth,0,r.clientHeight)).forEach(function(e){return t.insert(e)}),t.draw(t.ctx)}function a(){s(),m()}function s(){l(),o()}function l(){t.pause()}function m(){t.continue()}function f(){t.step(t.lastTick+t.tickLength)}function E(e){var t={q:a,w:s,e:l,r:m,t:f},n=e.key;for(var c in t)n===c&&t[c].call()}o(),document.addEventListener("keypress",E),document.addEventListener("DOMContentLoaded",function(){document.getElementById("fastrestart").addEventListener("click",a),document.getElementById("restart").addEventListener("click",s),document.getElementById("stop").addEventListener("click",l),document.getElementById("continue").addEventListener("click",m),document.getElementById("step").addEventListener("click",f)});
},{"./aabb":"CRZn","./game":"dgAm","./utils":"UldJ"}]},{},["B6dB"], null)